{"remainingRequest":"/Users/tlchat/Documents/learn/learnDemo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tlchat/Documents/learn/learnDemo/src/components/form/KFormItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tlchat/Documents/learn/learnDemo/src/components/form/KFormItem.vue","mtime":1577975657000},{"path":"/Users/tlchat/Documents/learn/learnDemo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tlchat/Documents/learn/learnDemo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tlchat/Documents/learn/learnDemo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tlchat/Documents/learn/learnDemo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEFzeWMtdmFsaWRhdG9yCmltcG9ydCBTY2hlbWEgZnJvbSAiYXN5bmMtdmFsaWRhdG9yIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBpbmplY3Q6IFsiZm9ybSJdLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcjogIiIgLy8gZXJyb3LmmK/nqbror7TmmI7moKHpqozpgJrov4cKICAgIH07CiAgfSwKICBwcm9wczogewogICAgbGFiZWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIHByb3A6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy4kb24oInZhbGlkYXRlIiwgKCkgPT4gewogICAgICB0aGlzLnZhbGlkYXRlKCk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHZhbGlkYXRlKCkgewogICAgICAvLyDop4TliJkKICAgICAgY29uc3QgcnVsZXMgPSB0aGlzLmZvcm0ucnVsZXNbdGhpcy5wcm9wXTsKICAgICAgLy8g5b2T5YmN5YC8CiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5mb3JtLm1vZGVsW3RoaXMucHJvcF07CgogICAgICAvLyDmoKHpqozmj4/ov7Dlr7nosaEKICAgICAgY29uc3QgZGVzYyA9IHsgW3RoaXMucHJvcF06IHJ1bGVzIH07CiAgICAgIC8vIOWIm+W7ulNjaGVtYeWunuS+iwogICAgICBjb25zdCBzY2hlbWEgPSBuZXcgU2NoZW1hKGRlc2MpOwogICAgICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlKHsgW3RoaXMucHJvcF06IHZhbHVlIH0sIGVycm9ycyA9PiB7CiAgICAgICAgaWYgKGVycm9ycykgewogICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yc1swXS5tZXNzYWdlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDmoKHpqozpgJrov4cKICAgICAgICAgIHRoaXMuZXJyb3IgPSAiIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["KFormItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"KFormItem.vue","sourceRoot":"src/components/form","sourcesContent":["<template>\n  <div>\n    <!-- label -->\n    <label v-if=\"label\">{{label}}</label>\n\n    <slot></slot>\n\n    <!-- 校验信息显示 -->\n    <p v-if=\"error\">{{error}}</p>\n  </div>\n</template>\n\n<script>\n// Asyc-validator\nimport Schema from \"async-validator\";\n\nexport default {\n  inject: [\"form\"],\n  data() {\n    return {\n      error: \"\" // error是空说明校验通过\n    };\n  },\n  props: {\n    label: {\n      type: String,\n      default: \"\"\n    },\n    prop: {\n      type: String\n    }\n  },\n  mounted() {\n    this.$on(\"validate\", () => {\n      this.validate();\n    });\n  },\n  methods: {\n    validate() {\n      // 规则\n      const rules = this.form.rules[this.prop];\n      // 当前值\n      const value = this.form.model[this.prop];\n\n      // 校验描述对象\n      const desc = { [this.prop]: rules };\n      // 创建Schema实例\n      const schema = new Schema(desc);\n      return schema.validate({ [this.prop]: value }, errors => {\n        if (errors) {\n          this.error = errors[0].message;\n        } else {\n          // 校验通过\n          this.error = \"\";\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n</style>"]}]}