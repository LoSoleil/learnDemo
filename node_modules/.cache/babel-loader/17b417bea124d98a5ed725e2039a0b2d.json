{"remainingRequest":"/Users/tlchat/Documents/learn/vue-study-web16/node_modules/babel-loader/lib/index.js!/Users/tlchat/Documents/learn/vue-study-web16/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tlchat/Documents/learn/vue-study-web16/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tlchat/Documents/learn/vue-study-web16/src/components/form/KFormItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tlchat/Documents/learn/vue-study-web16/src/components/form/KFormItem.vue","mtime":1577975657000},{"path":"/Users/tlchat/Documents/learn/vue-study-web16/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tlchat/Documents/learn/vue-study-web16/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tlchat/Documents/learn/vue-study-web16/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tlchat/Documents/learn/vue-study-web16/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvdGxjaGF0L0RvY3VtZW50cy9sZWFybi92dWUtc3R1ZHktd2ViMTYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gQXN5Yy12YWxpZGF0b3IKaW1wb3J0IFNjaGVtYSBmcm9tICJhc3luYy12YWxpZGF0b3IiOwpleHBvcnQgZGVmYXVsdCB7CiAgaW5qZWN0OiBbImZvcm0iXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3I6ICIiIC8vIGVycm9y5piv56m66K+05piO5qCh6aqM6YCa6L+HCgogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBsYWJlbDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgcHJvcDogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuJG9uKCJ2YWxpZGF0ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMudmFsaWRhdGUoKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIOinhOWImQogICAgICB2YXIgcnVsZXMgPSB0aGlzLmZvcm0ucnVsZXNbdGhpcy5wcm9wXTsgLy8g5b2T5YmN5YC8CgogICAgICB2YXIgdmFsdWUgPSB0aGlzLmZvcm0ubW9kZWxbdGhpcy5wcm9wXTsgLy8g5qCh6aqM5o+P6L+w5a+56LGhCgogICAgICB2YXIgZGVzYyA9IF9kZWZpbmVQcm9wZXJ0eSh7fSwgdGhpcy5wcm9wLCBydWxlcyk7IC8vIOWIm+W7ulNjaGVtYeWunuS+iwoKCiAgICAgIHZhciBzY2hlbWEgPSBuZXcgU2NoZW1hKGRlc2MpOwogICAgICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlKF9kZWZpbmVQcm9wZXJ0eSh7fSwgdGhpcy5wcm9wLCB2YWx1ZSksIGZ1bmN0aW9uIChlcnJvcnMpIHsKICAgICAgICBpZiAoZXJyb3JzKSB7CiAgICAgICAgICBfdGhpczIuZXJyb3IgPSBlcnJvcnNbMF0ubWVzc2FnZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5qCh6aqM6YCa6L+HCiAgICAgICAgICBfdGhpczIuZXJyb3IgPSAiIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["KFormItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA,OAAA,MAAA,MAAA,iBAAA;AAEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,MAAA,CADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA,CACA;;AADA,KAAA;AAGA,GANA;AAOA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AALA,GAPA;AAgBA,EAAA,OAhBA,qBAgBA;AAAA;;AACA,SAAA,GAAA,CAAA,UAAA,EAAA,YAAA;AACA,MAAA,KAAA,CAAA,QAAA;AACA,KAFA;AAGA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA;AACA,UAAA,KAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA,IAAA,CAAA,CAFA,CAGA;;AACA,UAAA,KAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA,IAAA,CAAA,CAJA,CAMA;;AACA,UAAA,IAAA,uBAAA,KAAA,IAAA,EAAA,KAAA,CAAA,CAPA,CAQA;;;AACA,UAAA,MAAA,GAAA,IAAA,MAAA,CAAA,IAAA,CAAA;AACA,aAAA,MAAA,CAAA,QAAA,qBAAA,KAAA,IAAA,EAAA,KAAA,GAAA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,MAAA,CAAA,CAAA,CAAA,CAAA,OAAA;AACA,SAFA,MAEA;AACA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,EAAA;AACA;AACA,OAPA,CAAA;AAQA;AAnBA;AArBA,CAAA","sourcesContent":["<template>\n  <div>\n    <!-- label -->\n    <label v-if=\"label\">{{label}}</label>\n\n    <slot></slot>\n\n    <!-- 校验信息显示 -->\n    <p v-if=\"error\">{{error}}</p>\n  </div>\n</template>\n\n<script>\n// Asyc-validator\nimport Schema from \"async-validator\";\n\nexport default {\n  inject: [\"form\"],\n  data() {\n    return {\n      error: \"\" // error是空说明校验通过\n    };\n  },\n  props: {\n    label: {\n      type: String,\n      default: \"\"\n    },\n    prop: {\n      type: String\n    }\n  },\n  mounted() {\n    this.$on(\"validate\", () => {\n      this.validate();\n    });\n  },\n  methods: {\n    validate() {\n      // 规则\n      const rules = this.form.rules[this.prop];\n      // 当前值\n      const value = this.form.model[this.prop];\n\n      // 校验描述对象\n      const desc = { [this.prop]: rules };\n      // 创建Schema实例\n      const schema = new Schema(desc);\n      return schema.validate({ [this.prop]: value }, errors => {\n        if (errors) {\n          this.error = errors[0].message;\n        } else {\n          // 校验通过\n          this.error = \"\";\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n</style>"],"sourceRoot":"src/components/form"}]}