{"remainingRequest":"/Users/tlchat/Documents/learn/vue-study-web16/node_modules/babel-loader/lib/index.js!/Users/tlchat/Documents/learn/vue-study-web16/node_modules/eslint-loader/index.js??ref--13-0!/Users/tlchat/Documents/learn/vue-study-web16/src/krouter/kvue-router.js","dependencies":[{"path":"/Users/tlchat/Documents/learn/vue-study-web16/src/krouter/kvue-router.js","mtime":1577975657000},{"path":"/Users/tlchat/Documents/learn/vue-study-web16/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tlchat/Documents/learn/vue-study-web16/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tlchat/Documents/learn/vue-study-web16/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvdGxjaGF0L0RvY3VtZW50cy9sZWFybi92dWUtc3R1ZHktd2ViMTYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvdGxjaGF0L0RvY3VtZW50cy9sZWFybi92dWUtc3R1ZHktd2ViMTYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IExpbmsgZnJvbSAnLi9rcm91dGVyLWxpbmsnOwppbXBvcnQgVmlldyBmcm9tICcuL2tyb3V0ZXItdmlldyc7CnZhciBWdWU7IC8vIDEu5a6e546w5LiA5Liq5o+S5Lu277ya5oyC6L29JHJvdXRlcgoKdmFyIEtWdWVSb3V0ZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBLVnVlUm91dGVyKG9wdGlvbnMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEtWdWVSb3V0ZXIpOwoKICAgIHRoaXMuJG9wdGlvbnMgPSBvcHRpb25zOwogICAgY29uc29sZS5sb2codGhpcy4kb3B0aW9ucyk7IC8vIOmcgOimgeWIm+W7uuWTjeW6lOW8j+eahGN1cnJlbnTlsZ7mgKcKICAgIC8vIOWIqeeUqFZ1ZeaPkOS+m+eahGRlZmluZVJlYWN0aXZl5YGa5ZON5bqU5YyWCiAgICAvLyDov5nmoLflsIbmnaVjdXJyZW505Y+Y5YyW55qE5pe25YCZ77yM5L6d6LWW55qE57uE5Lu25Lya6YeN5pawcmVuZGVyCgogICAgVnVlLnV0aWwuZGVmaW5lUmVhY3RpdmUodGhpcywgJ2N1cnJlbnQnLCAnLycpOyAvLyB0aGlzLmFwcCA9IG5ldyBWdWUoewogICAgLy8gICBkYXRhKCkgewogICAgLy8gICAgIHJldHVybiB7CiAgICAvLyAgICAgICBjdXJyZW50OiAnLycKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0pCiAgICAvLyDnm5Hmjqd1cmzlj5jljJYKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMub25IYXNoQ2hhbmdlLmJpbmQodGhpcykpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLm9uSGFzaENoYW5nZS5iaW5kKHRoaXMpKTsgLy8g5Yib5bu65LiA5Liq6Lev55Sx5pig5bCE6KGoCgogICAgdGhpcy5yb3V0ZU1hcCA9IHt9OwogICAgb3B0aW9ucy5yb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgICAgX3RoaXMucm91dGVNYXBbcm91dGUucGF0aF0gPSByb3V0ZTsKICAgIH0pOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEtWdWVSb3V0ZXIsIFt7CiAgICBrZXk6ICJvbkhhc2hDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uSGFzaENoYW5nZSgpIHsKICAgICAgY29uc29sZS5sb2cod2luZG93LmxvY2F0aW9uLmhhc2gpOwogICAgICB0aGlzLmN1cnJlbnQgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zbGljZSgxKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBLVnVlUm91dGVyOwp9KCk7CgpLVnVlUm91dGVyLmluc3RhbGwgPSBmdW5jdGlvbiAoX1Z1ZSkgewogIC8vIOS/neWtmOaehOmAoOWHveaVsO+8jOWcqEtWdWVSb3V0ZXLph4zpnaLkvb/nlKgKICBWdWUgPSBfVnVlOyAvLyDmjILovb0kcm91dGVyCiAgLy8g5oCO5LmI6I635Y+W5qC55a6e5L6L5Lit55qEcm91dGVy6YCJ6aG5CgogIFZ1ZS5taXhpbih7CiAgICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSgpIHsKICAgICAgLy8g56Gu5L+d5qC55a6e5L6L55qE5pe25YCZ5omN5omn6KGMCiAgICAgIGlmICh0aGlzLiRvcHRpb25zLnJvdXRlcikgewogICAgICAgIFZ1ZS5wcm90b3R5cGUuJHJvdXRlciA9IHRoaXMuJG9wdGlvbnMucm91dGVyOwogICAgICB9CiAgICB9CiAgfSk7IC8vIOS7u+WKoTLvvJrlrp7njrDkuKTkuKrlhajlsYDnu4Tku7Zyb3V0ZXItbGlua+WSjHJvdXRlci12aWV3CgogIFZ1ZS5jb21wb25lbnQoJ3JvdXRlci1saW5rJywgTGluayk7CiAgVnVlLmNvbXBvbmVudCgncm91dGVyLXZpZXcnLCBWaWV3KTsKfTsKCmV4cG9ydCBkZWZhdWx0IEtWdWVSb3V0ZXI7"},{"version":3,"sources":["/Users/tlchat/Documents/learn/vue-study-web16/src/krouter/kvue-router.js"],"names":["Link","View","Vue","KVueRouter","options","$options","console","log","util","defineReactive","window","addEventListener","onHashChange","bind","routeMap","routes","forEach","route","path","location","hash","current","slice","install","_Vue","mixin","beforeCreate","router","prototype","$router","component"],"mappings":";;;;AAAA,OAAOA,IAAP,MAAiB,gBAAjB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AAEA,IAAIC,GAAJ,C,CAEA;;IAEMC,U;;;AACJ,sBAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AACnB,SAAKC,QAAL,GAAgBD,OAAhB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKF,QAAjB,EAFmB,CAKnB;AACA;AACA;;AACAH,IAAAA,GAAG,CAACM,IAAJ,CAASC,cAAT,CAAwB,IAAxB,EAA8B,SAA9B,EAAyC,GAAzC,EARmB,CAUnB;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACAC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,YAAxB,EAAsC,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAtC;AACAH,IAAAA,MAAM,CAACC,gBAAP,CAAwB,MAAxB,EAAgC,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAhC,EApBmB,CAuBnB;;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACAV,IAAAA,OAAO,CAACW,MAAR,CAAeC,OAAf,CAAuB,UAAAC,KAAK,EAAI;AAC9B,MAAA,KAAI,CAACH,QAAL,CAAcG,KAAK,CAACC,IAApB,IAA4BD,KAA5B;AACD,KAFD;AAGD;;;;mCAEc;AACbX,MAAAA,OAAO,CAACC,GAAR,CAAYG,MAAM,CAACS,QAAP,CAAgBC,IAA5B;AAEA,WAAKC,OAAL,GAAeX,MAAM,CAACS,QAAP,CAAgBC,IAAhB,CAAqBE,KAArB,CAA2B,CAA3B,CAAf;AACD;;;;;;AAGHnB,UAAU,CAACoB,OAAX,GAAqB,UAAUC,IAAV,EAAgB;AACnC;AACAtB,EAAAA,GAAG,GAAGsB,IAAN,CAFmC,CAInC;AACA;;AACAtB,EAAAA,GAAG,CAACuB,KAAJ,CAAU;AACRC,IAAAA,YADQ,0BACO;AACb;AACA,UAAI,KAAKrB,QAAL,CAAcsB,MAAlB,EAA0B;AACxBzB,QAAAA,GAAG,CAAC0B,SAAJ,CAAcC,OAAd,GAAwB,KAAKxB,QAAL,CAAcsB,MAAtC;AACD;AAEF;AAPO,GAAV,EANmC,CAiBnC;;AACAzB,EAAAA,GAAG,CAAC4B,SAAJ,CAAc,aAAd,EAA6B9B,IAA7B;AACAE,EAAAA,GAAG,CAAC4B,SAAJ,CAAc,aAAd,EAA6B7B,IAA7B;AACD,CApBD;;AAsBA,eAAeE,UAAf","sourcesContent":["import Link from './krouter-link'\nimport View from './krouter-view'\n\nlet Vue;\n\n// 1.实现一个插件：挂载$router\n\nclass KVueRouter {\n  constructor(options) {\n    this.$options = options\n    console.log(this.$options);\n    \n\n    // 需要创建响应式的current属性\n    // 利用Vue提供的defineReactive做响应化\n    // 这样将来current变化的时候，依赖的组件会重新render\n    Vue.util.defineReactive(this, 'current', '/')\n\n    // this.app = new Vue({\n    //   data() {\n    //     return {\n    //       current: '/'\n    //     }\n    //   }\n    // })\n    \n    // 监控url变化\n    window.addEventListener('hashchange', this.onHashChange.bind(this))\n    window.addEventListener('load', this.onHashChange.bind(this))\n\n\n    // 创建一个路由映射表\n    this.routeMap = {}\n    options.routes.forEach(route => {\n      this.routeMap[route.path] = route\n    })\n  }\n\n  onHashChange() {\n    console.log(window.location.hash);\n\n    this.current = window.location.hash.slice(1)\n  }\n}\n\nKVueRouter.install = function (_Vue) {\n  // 保存构造函数，在KVueRouter里面使用\n  Vue = _Vue;\n\n  // 挂载$router\n  // 怎么获取根实例中的router选项\n  Vue.mixin({\n    beforeCreate() {\n      // 确保根实例的时候才执行\n      if (this.$options.router) {\n        Vue.prototype.$router = this.$options.router\n      }\n\n    }\n  })\n\n\n  // 任务2：实现两个全局组件router-link和router-view\n  Vue.component('router-link', Link)\n  Vue.component('router-view', View)\n}\n\nexport default KVueRouter"]}]}